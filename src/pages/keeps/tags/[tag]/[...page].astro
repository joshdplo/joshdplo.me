---
import { SITE } from "@constants";
import { getCollection } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";

export async function getStaticPaths({ paginate }) {
  const keeps = await getCollection("keeps");
  const tags = [...new Set(keeps.map((keep: any) => keep.data.tags).flat())];
  return paginate(tags, { pageSize: SITE.KEEPS_PER_PAGE, params: { tag } });
}

const { tag } = Astro.params;
const { page } = Astro.props;
---

<BaseLayout>
  {JSON.stringify(page)};
</BaseLayout>
