---
import { getCollection } from "astro:content";
import { getPageMenuLinksFromPath, getSingleItemCollectionPage } from "@util";
import CollectionLayout from "@layouts/CollectionLayout.astro";
import TMDBCard from "@components/TMDBCard.astro";
import SpotifyCard from "@components/SpotifyCard.astro";
import SteamCard from "@components/SteamCard.astro";

const pageMenuLinks = getPageMenuLinksFromPath("/likes");

const allTimeMoviesIds = [
  "10406", //encino man
  "348", //alien
  "563", //starship troopers
  "926", //galaxy quest
  "579974", //RRR
  "800937", //senior year
  "19995", //avatar
  "1648", //bill & ted 1
  "332270", //battle for sevastapol
];
const allTimeShowsIds = [
  "64432", //the magicians
  "1855", //star trek voyager
  "4629", //stargate sg-1
  "63333", //the last kingdom
  "56296", //orphan black
  "4586", //gilmore girls
  "61664", //sense8
  "10545", //true blood
  "39793", //call the midwife
];
const allTimeSongsIds = [
  "5SG2BVsZr0W7cFAkjh60TT", //the bottom
  "1dxQcXEZciFqzSCHLmly6n", //talking in code
  "7Ak2cwmIfDRuXkvg4T1OWL", //ambrosia
  "4niDU35YEMnJIQjKb506hb", //alchemy
  "6vzrbjMSJqo3OURh3KEPu0", //cora may
  "2LkPVbDZkWjBeZn5gEkmOt", //maurine
  "1K2vCXEItfiz7Yp5PQXFkx", //city girl
  "5NfAqXJmhvm3Oup4VoWHx9", //empty streets
  "2c6m3dyH0dn9bDf3RJxedu", //little death
];

const allTimeMovies = await getCollection("movies", ({ id }) =>
  allTimeMoviesIds.includes(id),
);
const allTimeShows = await getCollection("shows", ({ id }) =>
  allTimeShowsIds.includes(id),
);
const allTimeSongs = await getCollection("songs", ({ id }) =>
  allTimeSongsIds.includes(id),
);
const recentGames = await getCollection(
  "games",
  ({ data }) => data.recent === 1,
);
---

<CollectionLayout
  pageTitle="likes lots of stuff ðŸ“‹"
  heroText="Likes"
  {pageMenuLinks}
>
  <section class="contain">
    <h2 class="h4">
      <span class="bg no-pad">Top Movies</span>
    </h2>
    <div class="list list-tmdb">
      {allTimeMovies.map((m) => <TMDBCard data={m} mini={true} />)}
    </div>

    <h2 class="h4">
      <span class="bg no-pad">Top Shows</span>
    </h2>
    <div class="list list-tmdb">
      {allTimeShows.map((m) => <TMDBCard data={m} mini={true} />)}
    </div>

    <h2 class="h4">
      <span class="bg no-pad">Top Songs</span>
    </h2>
    <div class="list list-spotify">
      {allTimeSongs.map((m) => <SpotifyCard data={m} mini={true} />)}
    </div>

    <h2 class="h4">
      <span class="bg no-pad">Recent Games</span>
    </h2>
    <div class="list list-steam">
      {recentGames.map((g) => <SteamCard data={g} mini={true} />)}
    </div>
  </section>
</CollectionLayout>

<style lang="scss">
  h2 {
    margin-bottom: 0.8rem;
  }

  .list {
    margin-bottom: 1.5rem;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .list-tmdb {
    position: relative;
    display: grid;
    grid-template-columns: repeat(auto-fill, 100px);
    justify-content: center;
  }
</style>
